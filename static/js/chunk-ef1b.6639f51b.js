(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ef1b"],{"1dcI":function(t,e,s){},H9Fd:function(t,e,s){"use strict";var i=s("1dcI");s.n(i).a},nGGP:function(t,e,s){"use strict";s.r(e);var i=s("qnqY").a,c=(s("H9Fd"),s("KHd+")),n=Object(c.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"BOX"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),s("div",{staticClass:"pd"},[s("button",{on:{click:function(e){t.recopen()}}},[t._v("打开录音")]),t._v(" "),s("button",{on:{click:function(e){t.recclose()}}},[t._v("关闭录音")])]),t._v(" "),s("div",{staticClass:"pd"},[s("button",{on:{click:function(e){t.recstart()}}},[t._v("录制")]),t._v(" "),s("button",{on:{click:function(e){t.recstop()}}},[t._v("停止")]),t._v(" "),s("button",{staticStyle:{"margin-left":"60px"},on:{click:function(e){t.recpause()}}},[t._v("暂停")]),t._v(" "),s("button",{on:{click:function(e){t.recresume()}}},[t._v("继续")])]),t._v(" "),t._m(3),t._v(" "),s("div",{staticClass:"pd"},[s("button",{on:{click:function(e){t.recstop2()}}},[t._v("批量编码")]),t._v(" "),s("input",{staticClass:"bits",attrs:{type:"text",value:"8 to 96 step 8"}}),t._v("kbps（wav固定8、16），测试音质用的，除比特率外其他参数可调整\n    ")]),t._v(" "),t._m(4),t._v(" "),s("hr"),t._v(" "),s("audio",{staticClass:"recPlay",staticStyle:{width:"100%"}}),t._v(" "),s("div",{staticClass:"message"},t._l(t.data,function(e,i){return s("div",{key:i},[t._v("\n         [ "+t._s(e.now)+"] 已录制:"+t._s(e.kbps)+"kbps "+t._s(e.hz)+"hz 花"+t._s(e.ms)+"ms编码"+t._s(e.bm)+" ["+t._s(e.TYPE)+"]"+t._s(e.times)+"ms \n      "),s("button",{on:{click:function(s){t.recdown(e.id)}}},[t._v("下载")]),t._v(" "),s("button",{on:{click:function(s){t.recplay(e.id)}}},[t._v("播放")])])}),0),t._v(" "),s("div",{staticClass:"reclog"}),t._v(" "),s("div",{staticClass:"recinfo"})]),t._v(" "),s("div",{staticStyle:{padding:"100px"}})])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pd"},[this._v("\n      提示："),e("span",{staticClass:"typeTips"},[this._v("-")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pd"},[this._v("\n      比特率:"),e("input",{staticClass:"bit",attrs:{type:"text",value:"16"}}),this._v("如：kbps mp3、wav取值8位16位\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pd"},[this._v("\n      采样率:"),e("input",{staticClass:"sample",attrs:{type:"text",value:"16000"}}),this._v("如：mp3标准值，wav任意\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pd recpower"},[e("div",{staticStyle:{height:"40px",width:"300px",background:"#999",position:"relative"}},[e("div",{staticClass:"recpowerx",staticStyle:{height:"40px",background:"#0B1",position:"absolute"}}),this._v(" "),e("div",{staticClass:"recpowert",staticStyle:{"padding-left":"50px","line-height":"40px",position:"relative"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pd"},[e("div",{staticClass:"recwave",staticStyle:{height:"100px",width:"300px",border:"1px solid #ccc","box-sizing":"border-box",display:"inline-block"}}),this._v(" "),e("input",{staticClass:"recwaveSet",attrs:{type:"checkbox",checked:""}})])}],!1,null,"2e506c7a",null);n.options.__file="records-new.vue";e.default=n.exports},qnqY:function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_recorder_core_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("v8yg"),_utils_waveview_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("WlXz"),_utils_waveview_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_utils_waveview_js__WEBPACK_IMPORTED_MODULE_1__),_utils_mp3_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("inKK"),_utils_jquery_min_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("A2tw");__webpack_exports__.a={data:function(){return{bit:16,sample:16e3,rec:"",recblob:{},Random:{idx:0},data:[]}},watch:{},mounted:function(){var t=this;$(window).bind("error",function(e){t.reclog('<span style="color:red">【Error】:<pre>'+(e.error?e.error.stack:event.message)+"</pre></span>")});$(".recinfo").html(this.BuildHtml($(".tp_recinfo").html())),this.reclog("点击打开录音开始哦，此浏览器<span style='color:"+(Recorder.Support()?"green'>":"red'>不")+"支持录音</span>"),this.reclog("WaveView Extensions已启用")},methods:{reclog:function(t){$(".reclog").prepend("<div>["+(new Date).toLocaleTimeString()+"]"+t+"</div>")},RandomKey:function(){return"randomkey"+this.Random.idx++},intp:function(t,e){return(t=""+t).length>=e?t:("_______"+t).substr(-e)},BuildHtml:function BuildHtml(html,o,notEncode,loop){return console.log(html),o||(o={}),html=(null==html?"":html+"").replace(/\{(fn:)?(:)?(.+?)\}/gi,function(a,b,c,code){try{var v=eval(b?code:"o."+code);return v=void 0===v?"":v+"",v}catch(t){return console.log("BuildHtml Fail",a+"\n"+t.stack),""}}),loop&&/\{(fn:)?(.+?)\}/.test(html)&&(html=this.BuildHtml(html,o,notEncode,loop)),html},recplay:function(t){console.log("播放");var e=this.recblob[t];if(e){var s=$(".recPlay")[0];s.controls=!0,s.ended||s.paused||s.pause(),e.play=(e.play||0)+1;var i=function(s){$(".p"+t).html('<span style="color:green">'+e.play+"</span> "+(new Date).toLocaleTimeString()+" "+s)};i("");var c=function(t){s.src=URL.createObjectURL(t),s.play()},n=Recorder[e.set.type+"2wav"];n?(i("正在转码成wav..."),n(e.blob,function(t){c(t),i("已转码成wav播放")},function(t){i("转码成wav失败："+t)})):c(e.blob)}},recdown:function(t){var e=this.recblob[t];if(e){var s=this.RandomKey(16),i="rec-"+e.time+"ms-"+e.set.bitRate+"kbps-"+e.set.sampleRate+"hz."+e.set.type;e.down=(e.down||0)+1,$(".d"+t).html('<span style="color:red">'+e.down+'</span> <span class="'+s+'"> 没弹下载？试一下链接或复制文本<button @click="recdown64(\''+t+"','"+s+"')\">生成Base64文本</button></span>");var c=document.createElement("A");c.innerHTML="下载 "+i,c.href=URL.createObjectURL(e.blob),c.download=i,$("."+s).prepend(c),c.click()}},recdown64:function(t,e){var s=this,i=this.recblob[t],c=new FileReader;c.onloadend=function(){var t=s.RandomKey(16);$("."+e).append('<textarea class="'+t+'"></textarea>'),$("."+t).val(c.result)},c.readAsDataURL(i.blob)},recstop2:function(){var t=this;if(this.rec&&this.rec.buffer){var e=this.sample,s=/(\d+)\s+to\s+(\d+)\s+step\s+(\d+)\s*/i.exec($(".bits").val());if(s){this.reclog("开始批量编码，请勿进行其他操作~"),this.rec.set.type="mp3",this.rec.set.sampleRate=e;for(var i=[],c=+s[1];c<+s[2]+1;c+=+s[3])i.push(c);"wav"==this.rec.set.type&&(i=[8,16]);c=-1;var n=this.rec.set.bitRate;!function e(){if(++c>=i.length)return t.rec.set.bitRate=n,void t.reclog("批量编码完成");t.rec.set.bitRate=i[c],t.rec.state=1,t.recstop(e)}()}else this.reclog("码率列表有误，需要? to ? step ?结构")}else this.reclog("需先录个音")},recstop:function(t){var e=this;if(this.rec){t||this.reclog("正在编码"+this.rec.set.type+"...");var s=this.rec.set.type,i=this,c=Date.now();this.rec.stop(function(n,r){var o=i.RandomKey(16);i.recblob[o]={blob:n,set:$.extend({},i.rec.set),time:r};var a=(new Date).toLocaleTimeString(),l=i.intp(e.rec.set.bitRate,3),_=i.intp(e.rec.set.sampleRate,5),p=i.intp(Date.now()-c,4),u=i.intp(n.size,6),v=i.intp(r,6);e.data.push({id:o,now:a,kbps:l,hz:_,ms:p,bm:u,TYPE:s,times:v}),console.log(e.data),t&&t()},function(e){i.reclog("失败："+e),t&&t()})}},recclose:function(){var t=this;this.rec&&this.rec.close(function(){t.reclog("已关闭")})},recstart:function(){this.rec&&(this.rec.start(),this.reclog("录制中..."))},recpause:function(){this.rec&&(this.rec.pause(),this.reclog("已暂停"))},recresume:function(){this.rec&&(this.rec.resume(),this.reclog("继续录音中..."))},recopen:function(){var t,e=this,s=this.bit,i=this.sample,c=$(".recwaveSet")[0].checked;console.log(t),console.log(c),this.rec=Recorder({type:"mp3",bitRate:s,sampleRate:i,onProcess:function(e,s,i,n){$(".recpowerx").css("width",s+"%"),$(".recpowert").html(i+"/"+s),c&&t.input(e[e.length-1],s,n)}}),this.rec.open(function(){e.reclog("已打开:mp3 "+s+"kbps"),t=Recorder.WaveView({elem:".recwave"})},function(t,s){e.reclog((s?"UserNotAllow，":"")+"打开失败："+t)})}}}}}]);