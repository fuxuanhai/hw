(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-52d9"],{"9B2l":function(e,t,i){"use strict";var o=i("P68Y");i.n(o).a},HyD0:function(e,t,i){},IA7f:function(e,t,i){"use strict";var o=i("HyD0");i.n(o).a},OviB:function(e,t,i){"use strict";i.r(t);var o=i("Vryn"),a=i("uXAG"),r={components:{player:o.a},data:function(){return{uploadUrl:"https://www.chnmrg.cc/php/Api_v1/UploadFile/uploadMp4",uploadUrlImg:"https://www.chnmrg.cc/php/Api_v1/UploadFile/uploadImg",videoFlag:!1,videoUploadPercent:0,show:!1,videoUrl:"https://playertest.longtailvideo.com/adaptive/bipbop/gear4/prog_index.m3u8",state:!1,cover:"",ruleForm:{text:"",mp4_key:"",Video:"",image_url:""},dialogImageUrl:""}},computed:{isText:function(){return"text"==this.$route.query.type},isVideo:function(){return"video"==this.$route.query.type},isImg:function(){return"img"==this.$route.query.type},isGroupChat:function(){return"groupchat"==this.$route.query.type}},watch:{},created:function(){},mounted:function(){this.isImg&&(document.querySelector(".el-upload--picture-card").className+=" needsclick");this.isVideo&&(document.querySelector(".el-upload--text .el-icon-plus").className+=" needsclick")},methods:{textareainput:function(){var e=document.getElementById("text");e.style.height="2.306667rem",e.style.height=e.scrollHeight+"px"},beforeUploadVideo:function(e){e.size;if(-1==["video/mp4"].indexOf(e.type))return Object(a.b)("请上传正确的视频格式"),!1},uploadVideoProcess:function(e,t,i){this.videoFlag=!0,this.videoUploadPercent=+t.percentage.toFixed(0)},handleVideoSuccess:function(e,t){this.videoFlag=!1,this.videoUploadPercent=0,200==e.code?(this.ruleForm.mp4_key=e.data.key,this.ruleForm.Video=e.data.url):this.$message.error("视频上传失败，请重新上传！")},videoPlay:function(){this.show=!0},overlay:function(){this.state=!this.state},handleRemove:function(e,t){this.ruleForm.image_url=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.show=!0},handleAvatarSuccessImg:function(e,t,i){this.ruleForm.image_url=i},beforeAvatarUploadImg:function(e){var t=/^image\/(jpeg|png|jpg)$/.test(e.type),i=e.size/1024/1024<2;if(t){if(i)return t&&i;Object(a.b)("上传图片大小不能超过 2MB!")}else Object(a.b)("上传图片只能是 .JPG .JPEG  .PNG 格式!")},publishSend:function(){this.isText}}},l=(i("9B2l"),i("KHd+")),s=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"publish "},[i("header",{staticClass:"flex flex-align-center "},[i("div",{staticClass:"left"},[i("span",{on:{click:e.goback}},[e._v("取消")])]),e._v(" "),i("div",{staticClass:"center flex-1"},[e._v("發動態")]),e._v(" "),i("div",{staticClass:"right"},[i("button",{on:{click:e.publishSend}},[e._v("發布")])])]),e._v(" "),i("main",[i("article",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.text,expression:"ruleForm.text"}],ref:"text",attrs:{maxlength:"255",id:"text",placeholder:"發點什麼吧.."},domProps:{value:e.ruleForm.text},on:{input:[function(t){t.target.composing||e.$set(e.ruleForm,"text",t.target.value)},e.textareainput]}}),e._v(" "),e.isVideo?i("el-upload",{ref:"videoupload",staticClass:"avatar-uploader  ",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleVideoSuccess,"before-upload":e.beforeUploadVideo,"on-progress":e.uploadVideoProcess,accept:"audio/mp4, video/mp4"}},[""!=e.ruleForm.Video&&0==e.videoFlag?i("video",{staticClass:"avatar",attrs:{src:e.ruleForm.Video}},[e._v("您的浏览器不支持视频播放")]):e._e(),e._v(" "),""!=e.ruleForm.Video&&0==e.videoFlag?i("i",{staticClass:"playicon",on:{click:e.videoPlay}}):""==e.ruleForm.Video&&0==e.videoFlag?i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):e._e(),e._v(" "),1==e.videoFlag?i("el-progress",{attrs:{type:"circle",percentage:e.videoUploadPercent}}):e._e()],1):e._e(),e._v(" "),e.isImg?i("el-upload",{staticClass:"avatar-uploader ",attrs:{action:e.uploadUrlImg,limit:2,accept:"image/jpeg,image/jpg,image/png","list-type":"picture-card","on-success":e.handleAvatarSuccessImg,"before-upload":e.beforeAvatarUploadImg,multiple:!0,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]):e._e(),e._v(" "),i("van-popup",{on:{"click-overlay":e.overlay},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.isVideo?i("player",{attrs:{"video-url":e.ruleForm.Video,state:e.state,cover:e.cover}}):e._e(),e._v(" "),e.isImg?i("img",{staticClass:"bigimg",attrs:{src:e.dialogImageUrl,alt:""}}):e._e()],1)],1)])])},[],!1,null,"7246a661",null);s.options.__file="publish.vue";t.default=s.exports},P68Y:function(e,t,i){},Vryn:function(e,t,i){"use strict";var o={props:{videoUrl:String,state:Boolean,cover:String},data:function(){return{playerOptions:{playbackRates:[.7,1,1.5,2],overNative:!0,autoplay:!1,controls:!0,sourceOrder:!0,aspectRatio:"16:9",fluid:!0,html5:{hls:{withCredentials:!1}},sources:[{withCredentials:!1,type:this.Detectiontype,src:this.videoUrl}],muted:!1,loop:!1,poster:"/vue-videojs-demo/static/images/logo.png",reload:"auto",language:"zh-CN",controlBar:{timeDivider:!0,durationDisplay:!0,progressControl:!0,customControlSpacer:!1,fullscreenToggle:!0}}}},watch:{videoUrl:function(e){""!==e&&this.$refs.videoPlayer.player.src(e)},state:function(e){this.$refs.videoPlayer.player.pause()}},created:function(){console.log(this.videoUrl)},updated:function(){this.$refs.videoPlayer.player.pause()},methods:{onPlayerPlay:function(e){},onPlayerPause:function(e){},playerStateChanged:function(e){}},computed:{player:function(){return this.$refs.videoPlayer.player},Detectiontype:function(){var e=this.videoUrl.lastIndexOf("."),t=this.videoUrl.length;return"mp4"==this.videoUrl.substring(e+1,t)?"rtmp/mp4":"application/x-mpegURL"}}},a=(i("IA7f"),i("KHd+")),r=Object(a.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"player"},[i("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin needsclick",attrs:{playsinline:!1,options:e.playerOptions},on:{play:function(t){e.onPlayerPlay(t)},pause:function(t){e.onPlayerPause(t)},statechanged:function(t){e.playerStateChanged(t)}}})],1)])},[],!1,null,"3f8ef197",null);r.options.__file="video.vue";t.a=r.exports}}]);